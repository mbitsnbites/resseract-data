// Collect all maps (official and custom/local).
// TODO(m): Do we need to update this list dynamically?
mapfiles = ""
loopfiles m "media/map" "ogz" [
   mapfiles = (concat $mapfiles $m)
]

// Get map meta info.
getmapinfo = [
   local infofile infoname info
   if $arg1 [
      infoname = (concatword $arg1 "_info")
      if (<= (listlen $$infoname) 0) [
         infofile = (concatword "media/map/" $arg1 ".info.cfg")
         if (findfile $infofile) [
            exec $infofile
         ]
      ]
      if (> (listlen $$infoname) 0) [
         info = $$infoname
      ]
   ]
   if (<= (listlen $info) 0) [
      info = [
        @@arg1
        ""
        ""
        "Custom"
        7
        6
      ]
   ]
   result $info
]

// Get the map name.
getmapname = [
   local info
   info = (getmapinfo $arg1)
   result (at $info 0)
]

// Get the map description.
getmapdescription = [
   local info
   info = (getmapinfo $arg1)
   result (at $info 1)
]

// Get the map author(s).
getmapauthor = [
   local info
   info = (getmapinfo $arg1)
   result (at $info 2)
]

// Get the map group.
getmapgroup = [
   local info
   info = (getmapinfo $arg1)
   result (at $info 3)
]

// Get the map mode mask.
getmapmodes = [
   local info
   info = (getmapinfo $arg1)
   result (at $info 4)
]

// Get the number of recommended players for the map.
getmapplayers = [
   local info
   info = (getmapinfo $arg1)
   result (at $info 5)
]

